## 基础组件系统

基于ThinkPHP5.1

环境要求：

> PHP7.1+ (启用PHP-Redis、OpenSSL、Curl以及MbString扩展)
> 
> MySQL5.6
> 
> Redis缓存

本地开发地址：http://component.xnn.fun/

### 开发说明

* 1、使用`environments`目录保存各种不同的开发环境配置
* 2、使用`php think migration`管理数据表结构版本，在`database`目录下
* 3、使用`php think init --env=dev`生成开发、生产等环境配置文件

### 初始化步骤

* 1、composer安装，根目录下执行：`composer update`命令
* 2、创建数据库，utf8mb4编码
* 3、修改配置文件：修改配置`environments`目录下`dev`目录中的各个配置项目，其中`dev`是本地开发的各种配置，`prod`是生产发布下的各种配置，`test`是测试环境下的各种配置。对于本地开发设置好`dev`下的各项配置参数即可。
* 4、执行配置文件初始化，根目录下执行：`php think init --env=dev`命令初始化开发环境的配置。
* 5、执行数据表迁移命令，根目录下执行：`php think migrate:run`命令，生成各种数据表。
* 6、初始化各种表的基本数据，根目录下执行：`php think seed:run`命令，为各种数据表填充必要的数据。

### Git分支说明

* `master`分支开发基于组件系统而成的自有cms
* `framework`分支则是纯粹的组件系统，只有最基础的功能和表结构
* 其他分支则一些特性分支或功能调试分支

### 角色、部门和用户之间的关系

````
用户与角色：一对一
用户与部门：一对一
````

当前组件系统支持角色、部门权限支撑中小型应用已无问题，不计划支持一对多。

用户字段中有标记是否为部门领导的字段`is_leader`，标记是否为所在部门的领导，该字段与数据范围没有关系，数据范围在角色菜单中指定。

数据范围标记说明

* `super`  - 超管，所有数据，即不受限的查看所有数据，跟用户所属部门没有任何关系。
* `leader` - 领导，部门及子部门数据，这里还需考虑跨部门存在个人数据的情况。
* `staff`  - 职员，仅个人数据，可能有跨部门存在个人数据的情况。
* `guest`  - 游客，无数据权限，可能就是为了演示功能。
