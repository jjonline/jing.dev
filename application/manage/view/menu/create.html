

<div class="row">
    <div class="col-xs-12">
        <div class="box box-danger">
            <div class="box-header with-border">
                <h4 class="box-title">菜单信息</h4>
            </div>
            <form action="<%{:url('menu/create')}%>" class="form-horizontal" id="menuAdd">
                <div class="box-body">
                    <div class="menu_deal_intro">
                        <h3>待选字段列表填写说明：</h3>
                        <ul>
                            <li>1、`字段`填写带别名的数据表字段，程序中会使用到，例如：order.sn、order_detail.buy_num</li>
                            <li>2、`名称`填写字段对应的中文名称，前端显示上会用到，例如：订单号、购买数量</li>
                            <li>3、`可排序`选项指定该字段在列表中是否可以作为排序的字段</li>
                            <li>4、后方删除按钮可以删除该字段</li>
                            <li>5、后方移动按钮，可以调整字段显示顺序，从上往下依次对应自左到右</li>
                            <li>6、可点击下方添加字段按钮添加多个字段</li>
                        </ul>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">一级菜单：</label>
                        <div class="col-sm-5">
                            <select name="Menu[level1]" id="level1" class="form-control select2">
                                <option value="">--新建一级菜单--</option>
                                <%{volist name="list" id="item"}%>
                                    <%{if condition="$item.level EQ 1"}%>
                                        <option value="<%{$item.id}%>"><%{$item.name}%></option>
                                    <%{/if}%>
                                <%{/volist}%>
                            </select>
                        </div>
                    </div>

                    <div class="form-group" id="level2_container">
                        <label class="col-sm-2 control-label">二级菜单：</label>
                        <div class="col-sm-5">
                            <select name="Menu[level2]" id="level2" class="form-control select2">
                                <option value="">--新建二级菜单--</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">菜单名称：</label>
                        <div class="col-sm-5"><input type="text" id="name" class="form-control" name="Menu[name]" placeholder="菜单名称，将显示在左侧导航栏，例如：工作台">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">菜单标签：</label>
                        <div class="col-sm-5">
                            <input type="text" id="tag" class="form-control" name="Menu[tag]" placeholder="菜单标签，不得超过50字符，全局唯一，例如：MenuAction">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">导航链接：</label>
                        <div class="col-sm-5">
                            <input type="text" id="url" class="form-control" name="Menu[url]" placeholder="菜单点击后打开的网址，格式如下：manage/menu/list">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">图标class类：</label>
                        <div class="col-sm-5">
                            <input type="text" id="icon" class="form-control" name="Menu[icon]" placeholder="fontawesome、glyphicon或ionicons图标的class，例如：fa fa-cog">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">菜单排序：</label>
                        <div class="col-sm-5">
                            <input type="number" id="sort" class="form-control" name="Menu[sort]" placeholder="该级别的排序，大于0的整数，数字越小越靠前">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">是否必选：</label>
                        <div class="col-sm-5">
                            <div class="js-switch-container" data-toggle="tooltip" title="必选的公用菜单选是">
                                <input type="checkbox" id="is_required" name="Menu[is_required]" title="是" data-on-text="是" data-off-text="否">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">是否badge：</label>
                        <div class="col-sm-5">
                            <div class="js-switch-container" data-toggle="tooltip" title="该菜单是否需要badge小红点统计功能">
                                <input type="checkbox" id="is_badge" name="Menu[is_badge]" title="是" data-on-text="是" data-off-text="否">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">是否系统菜单：</label>
                        <div class="col-sm-5">
                            <div class="js-switch-container" data-toggle="tooltip" title="选是菜单列表不显示删除按钮，即不可直接删除">
                                <input type="checkbox" id="is_system" name="Menu[is_system]" title="是" data-on-text="是" data-off-text="否">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">是否数据权限控制：</label>
                        <div class="col-sm-5">
                            <div class="js-switch-container" data-toggle="tooltip" title="该菜单是否需要依据部门层级显示全部、部门或个人的数据，选是则在定制角色时需要选择角色的数据范围">
                                <input type="checkbox" id="is_permissions" name="Menu[is_permissions]" title="是" data-on-text="是" data-off-text="否">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">备注信息：</label>
                        <div class="col-sm-5">
                            <textarea id="remark" rows=3 class="form-control" name="Menu[remark]" placeholder="菜单备注信息，便于管理员识别，可选"></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">是否控制字段显示：</label>
                        <div class="col-sm-5">
                            <div class="js-switch-container" data-toggle="tooltip" title="该菜单是否需要定制不同角色显示不同字段，选是则要完善该菜单下的所有待选字段">
                                <input type="checkbox" id="is_column" name="Menu[is_column]" title="是" data-on-text="是" data-off-text="否">
                            </div>
                        </div>
                    </div>
                    <div class="form-group" id="columns_container">
                        <label class="col-sm-2 control-label">待选字段列表：</label>
                        <div class="col-sm-8 columns_item">
                            <ul id="columns_item_container">
                                <li class="form-group columns_group">
                                    <div class="columns_manage">
                                        <i class="fa fa-trash"></i>
                                        <i class="fa fa-arrows-alt"></i>
                                    </div>
                                    <div class="col-xs-4">
                                        <div class="input-group">
                                            <div class="input-group-addon">字段</div>
                                            <input type="text" class="form-control columns" name="Columns[columns][]" placeholder="order.order_sn">
                                        </div>
                                    </div>
                                    <div class="col-xs-4">
                                        <div class="input-group">
                                            <div class="input-group-addon">名称</div>
                                            <input type="text" class="form-control name" name="Columns[name][]" placeholder="字段名称">
                                        </div>
                                    </div>
                                    <div class="col-xs-2">
                                        <div class="checkbox">
                                            <label>
                                                <input type="checkbox" class="sorted" name="Columns[sorted][]"> 可排序
                                            </label>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                            <div class="form-group columns_group_btn">
                                <div class="col-xs-6">
                                    <button type="button" class="btn btn-block btn-default" id="insert_five_columns">
                                        <i class="fa fa-plus"></i> 点此新增5个字段
                                    </button>
                                </div>
                                <div class="col-xs-6">
                                    <button type="button" class="btn btn-block btn-default"  id="insert_ten_columns">
                                        <i class="fa fa-plus"></i> 点此新增10个字段
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="box-footer">
                    <div class="row">
                        <div class="col-sm-offset-2 col-sm-5"><button type="submit" class="btn btn-success pull-right btn-submit">新增</button></div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<script src="__PUBLIC__/plugin/sortable/Sortable.min.js" type="text/javascript"></script>
<script type="text/javascript">
var menu = <%{:json_encode($list)}%>;
</script>
