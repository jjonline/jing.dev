

<div class="row">
    <div class="col-xs-12">
        <div class="box box-info">
            <div class="box-header with-border">
                <h4 class="box-title">菜单信息</h4>
            </div>
            <form action="<%{:url('menu/edit')}%>" class="form-horizontal" id="menuEdit">
                <div class="box-body">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">一级菜单：</label>
                        <div class="col-sm-5">
                            <select name="Menu[level1]" id="level1" class="form-control select2">
                                <option value="">--新建一级菜单--</option>
                                <%{volist name="list" id="item"}%>
                                    <%{if condition="$item.level EQ 1"}%>
                                        <option value="<%{$item.id}%>"<%{if condition="$menu_edit.level EQ 1 && $menu_edit.id EQ $item.id && $menu_edit.level NEQ 1"}%> selected="selected"<%{/if}%>><%{$item.name}%></option>
                                    <%{/if}%>
                                <%{/volist}%>
                            </select>
                        </div>
                    </div>
                    <input type="hidden" name="Menu[id]" value="<%{$menu_edit.id}%>">
                    <div class="form-group" id="level2_container">
                        <label class="col-sm-2 control-label">二级菜单：</label>
                        <div class="col-sm-5">
                            <select name="Menu[level2]" id="level2" class="form-control select2">
                                <option value="">--新建二级菜单--</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">菜单名称：</label>
                        <div class="col-sm-5"><input type="text" id="name" class="form-control" name="Menu[name]" placeholder="菜单名称，将显示在左侧导航栏，例如：工作台" value="<%{$menu_edit.name}%>">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">菜单标签：</label>
                        <div class="col-sm-5">
                            <input type="text" id="tag" class="form-control" name="Menu[tag]" placeholder="菜单标签，不得超过50字符，全局唯一，例如：MenuAction" value="<%{$menu_edit.tag}%>">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">导航链接：</label>
                        <div class="col-sm-5">
                            <input type="text" id="url" class="form-control" name="Menu[url]" placeholder="菜单点击后打开的网址，格式如下：menu/list" value="<%{$menu_edit.url}%>">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">图标class类：</label>
                        <div class="col-sm-5">
                            <input type="text" id="icon" class="form-control" name="Menu[icon]" placeholder="fontawesome、glyphicon或ionicons图标的class，例如：fa fa-cog" value="<%{$menu_edit.icon}%>">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">菜单排序：</label>
                        <div class="col-sm-5">
                            <input type="number" id="sort" class="form-control" name="Menu[sort]" placeholder="该级别的排序，大于0的整数，数字越小越靠前" value="<%{$menu_edit.sort}%>">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">是否必选：</label>
                        <div class="col-sm-5">
                            <div class="js-switch-container">
                                <input type="checkbox" id="is_required" name="Menu[is_required]" title="是" data-on-text="是" data-off-text="否"<%{if condition="$menu_edit.is_required EQ 1"}%> checked="checked"<%{/if}%>>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">是否badge：</label>
                        <div class="col-sm-5">
                            <div class="js-switch-container">
                                <input type="checkbox" id="is_badge" name="Menu[is_badge]" title="是" data-on-text="是" data-off-text="否"<%{if condition="$menu_edit.is_badge EQ 1"}%> checked="checked"<%{/if}%>>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">是否系统菜单：</label>
                        <div class="col-sm-5">
                            <div class="js-switch-container">
                                <input type="checkbox" id="is_system" name="Menu[is_system]" title="是" data-on-text="是" data-off-text="否"<%{if condition="$menu_edit.is_system EQ 1"}%> checked="checked"<%{/if}%>>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">菜单额外数据：</label>
                        <div class="col-sm-5">
                            <textarea id="extra_param" rows=3 class="form-control" name="Menu[extra_param]" placeholder="菜单额外所可使用的数据，填入json字符串，使用时自动转换为数组，可选"></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">备注信息：</label>
                        <div class="col-sm-5">
                            <textarea id="remark" rows=3 class="form-control" name="Menu[remark]" placeholder="菜单备注信息，便于管理员识别，可选"><%{$menu_edit.remark}%></textarea>
                        </div>
                    </div>
                </div>
                <div class="box-footer">
                    <div class="row">
                        <div class="col-sm-offset-2 col-sm-5"><button type="submit" class="btn btn-success pull-right btn-submit">提交</button></div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<script type="text/javascript">
    var level = <%{$menu_edit.level}%>;
    var item  = <%{:json_encode($menu_edit)}%>;
    var menu  = <%{:json_encode($list)}%>;
</script>